# 订单流机器人GUI监控工具使用指南

## 概述

这是一个图形界面监控工具，可以实时监控所有运行的订单流机器人，显示交易信号、运行状态等信息。

## 功能特点

✅ **实时监控**: 自动检测所有运行的订单流机器人  
✅ **信号显示**: 实时显示买入/卖出信号  
✅ **多机器人支持**: 同时监控多个交易对的机器人  
✅ **信号统计**: 显示信号总数、买入/卖出数量、确认状态  
✅ **自动刷新**: 每3秒自动更新一次  
✅ **详情查看**: 双击机器人可查看详细信息  

## 启动方法

### Windows

```bash
# 方法1: 直接运行Python脚本
python booking\monitor_bots_gui.py

# 方法2: 使用批处理文件
booking\start_monitor_gui.bat
```

### Linux/macOS

```bash
# 方法1: 直接运行Python脚本
python3 booking/monitor_bots_gui.py

# 方法2: 使用Shell脚本
bash booking/start_monitor_gui.sh
```

## 界面说明

### 主界面布局

```
┌─────────────────────────────────────────┐
│     订单流机器人监控中心                  │
├─────────────────────────────────────────┤
│  [机器人状态] [交易信号]                 │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 机器人列表                       │   │
│  │ PID | 交易所 | 交易对 | 模式... │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [立即刷新] [打开日志目录]              │
│  状态栏: 最后更新时间                    │
└─────────────────────────────────────────┘
```

### 标签页说明

#### 1. 机器人状态标签页

显示所有运行的机器人信息：

| 列名 | 说明 |
|------|------|
| PID | 进程ID |
| 交易所 | 交易所名称（如EDGEX） |
| 交易对 | 交易对（如ETH, BTC, SOL） |
| 模式 | 模拟模式/真实交易 |
| 运行时长 | 机器人运行时间 |
| 信号总数 | 生成的信号总数 |
| 买入 | 买入信号数量（🟢表示有买入信号） |
| 卖出 | 卖出信号数量 |
| 已确认 | 已确认的信号数量 |

**操作**:
- 双击机器人行可查看详细信息
- 有买入信号时，买入列会显示🟢标记

#### 2. 交易信号标签页

显示所有机器人的最新交易信号：

- **买入信号**: 绿色显示
- **卖出信号**: 红色显示
- **已确认信号**: 蓝色加粗显示

每个信号显示：
- 时间戳
- 方向（买入/卖出）
- 价格
- 信号强度
- 状态
- 原因
- 确认状态

## 使用示例

### 场景1: 监控单个机器人

1. 启动SOL机器人：
```bash
python booking/run_orderflow_bot.py --exchange edgex --ticker SOL --simulate
```

2. 启动监控界面：
```bash
python booking/monitor_bots_gui.py
```

3. 在"机器人状态"标签页查看SOL机器人状态
4. 在"交易信号"标签页查看生成的信号

### 场景2: 监控多个机器人

1. 启动多个机器人（不同终端）：
```bash
# 终端1 - ETH
python booking/run_orderflow_bot.py --exchange edgex --ticker ETH --simulate

# 终端2 - BTC
python booking/run_orderflow_bot.py --exchange edgex --ticker BTC --simulate

# 终端3 - SOL
python booking/run_orderflow_bot.py --exchange edgex --ticker SOL --simulate
```

2. 启动监控界面，所有机器人会同时显示

### 场景3: 查看买入信号

1. 打开监控界面
2. 查看"机器人状态"标签页
3. 注意"买入"列，如果有🟢标记，说明有买入信号
4. 切换到"交易信号"标签页查看详细信号信息

## 按钮功能

### 立即刷新
手动触发一次更新，无需等待自动刷新

### 打开日志目录
打开日志文件夹，可以查看：
- 信号CSV文件
- 活动日志文件

## 注意事项

1. **依赖要求**: 需要安装 `psutil` 库
   ```bash
   pip install psutil
   ```

2. **权限**: 需要读取进程信息的权限（通常不需要特殊权限）

3. **性能**: 监控工具本身资源占用很小，可以长时间运行

4. **更新频率**: 默认每3秒更新一次，可以在代码中修改 `update_interval` 变量

## 故障排除

### 问题1: 看不到运行的机器人

**可能原因**:
- 机器人进程名称不匹配
- 机器人未正确启动

**解决方法**:
- 确认机器人是通过 `run_orderflow_bot.py` 启动的
- 检查进程是否在运行：`tasklist | findstr python` (Windows) 或 `ps aux | grep python` (Linux)

### 问题2: 信号显示为空

**可能原因**:
- 机器人刚启动，还没有生成信号
- 信号文件路径不正确

**解决方法**:
- 等待一段时间让机器人生成信号
- 检查 `logs/` 目录下是否有对应的信号CSV文件

### 问题3: GUI界面无法启动

**可能原因**:
- 缺少tkinter库（Python GUI库）
- 缺少psutil库

**解决方法**:
```bash
# 安装依赖
pip install psutil

# tkinter通常是Python自带的，如果没有：
# Ubuntu/Debian: sudo apt-get install python3-tk
# macOS: 通常已包含
# Windows: 通常已包含
```

## 高级功能

### 自定义更新间隔

编辑 `monitor_bots_gui.py`，修改：
```python
self.update_interval = 3  # 改为你想要的秒数
```

### 添加更多显示列

在 `setup_bots_tab()` 方法中添加新列：
```python
columns = ('PID', '交易所', '交易对', ..., '新列名')
```

## 截图说明

界面包含：
- 顶部标题栏
- 标签页切换（机器人状态/交易信号）
- 机器人列表表格
- 信号详细显示区域
- 底部状态栏和控制按钮

## 总结

这个GUI监控工具提供了：
- ✅ 直观的图形界面
- ✅ 实时监控多个机器人
- ✅ 清晰的信号显示
- ✅ 便捷的操作方式

是监控订单流机器人的理想工具！
